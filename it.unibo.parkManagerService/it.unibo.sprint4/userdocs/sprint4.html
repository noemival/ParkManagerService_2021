<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <!--
<link rel="stylesheet" type="text/css" href="../css/issStyle1.css">
<script type="text/javascript" src="../css/issStyle.js"></script>
-->
<style type="text/css">
body
{
    margin-left:  30px;
    margin-right: 30px;
};

P
{
    font-family: Tahoma;
    font-size: 10pt;
};

a, a:visited, a:active, a:link, a:hover {
    text-decoration: underline;
    color: #545454;
    background-color: transparent;
	font-size: 93%;
}

a:hover {
    background-color: #cccccc;
}


hr {
    clear: both;
    height: 1px;
    color: #242424;
    background-color: transparent;
}

h1, h2, h3 {
    color: #242424;
    clear: left;
    font: 100% Tahoma, Helvetica, Arial, sans-serif;
    margin-bottom: 0.5em;
    padding-top: 0.5em;
	border-radius: 10px;
	padding: 5px;
}

top {
	width: 100%;
}


#i {
    color: #ff1010;
}
tt{
	font-family: "Arial";
    font-size: 90%;
	color: #006600;
}
em{
	font-family: "Arial";
    font-size: 80%;
	font-weight: bold;
	border-style:solid;
	border-color: #abe876;
    color: #1632cc;
}
bc{
	font-family: "Arial";
	font-size: 90%;
	font-weight: bold;
    color: #990000;
	background-color: #fcf8c7;
}
ks{
	font-family: "Arial";
	font-weight: bold;
    color: #0000CD	;
	font-size: 90%;
}
kc{
	font-family: "Arial";
	font-weight: bold;
    color: #008000	;
	font-size: 90%;
}
pre{
	font-family: "Consolas";
	font-size: 85%;
	background-color: #f5f5f5;
	border: 1.5px solid silver;
	padding: 5px;
}
m{
	font-family: "Helvetica";
	line-height: 100%;
 	font-size: 75%;
}
div.body{
	 
    font-size: 18px;
}
k{
	font-family: "Arial";
    color: #990000;
	font-weight: bold;
	font-size: 90%;
}
kn{
	font-family: "Arial";
    color: #0000CD	;
	font-size: 90%;
}
h1 {
    font-size: 150%;
    background-color: #b2c0ff;
	padding: 10px;
}

h2 {
    background-color: #9ed8ff;
    font-size: 130%;
}

h3 {
	background-color: #e6ccff;
    font-size: 100%;
}
h4 {
    background-color: #ccffcc;
    font-size: 100%;
	width: 95%;
	border-radius: 5px;
	padding: 2px;
}
h5 {
    background-color: #d5ffb0;
    font-size: 100%;

}
div.req{
	background-color: #d9ffb3;
    font-size: 18px;
	width: 700px;
    border: 3px solid green;
    padding: 15px;
    margin: 10px;
}
div.remark{
	background-color: #E3F2FD;
    border: 1.5px solid #d5f2ed;
    padding: 15px;
    margin: 10px;
	border-radius: 25px;
}
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}

ol, ul, li {
  margin: 0;
  margin-left: 10px;
  padding: 0;
  padding-bottom: 5px;
}

table, th, td {
	border: 1px solid black;
}

img {
	border: 1.5px solid #d5f2ed

}

a, a:visited, a:active, a:link, a:hover {
    text-decoration: underline;
    color: #545454;
    background-color: transparent;
}

div.wrapdesc{
	width: 90%;
	margin: auto;
}

div.imagedesc{
	width: 85%;
	margin: auto;
}
</style>
    
<head>
   
<title>Sprint 4</title></head>
    
<body>
<div id="top">
<h1>Workplan Automated Car-Parking- Sprint 4 <font size="5"></font> </h1>
</div>  

<h2>Requirements</h2>

<div class="remark">
The requirements given by the costumers  <a href="https://github.com/anatali/issLab2021/blob/main/it.unibo.issLabStart/userDocs/TFBO21ISS.pdf" target="web">Automated Car-Parking</a> considered in the following SPRINT are:</li>
</div>

	<ul>
		<li>a <em>thermometer</em> that measures the temperature <em>TA</em> of the area;</li>
		<li>a <em>fan</em> 
	
	</ul>
	The fan should be activated by ParkManagerService or ParkingManager when <k>TA > TMAX</k> and stopped when <k>TA &lt;= TMAX</k>, where <em>TMAX</em> is a prefixed value (e.g. <tt>35</tt>)</li>


The following sprint will focus to <kn>realize the operations of the fan, thermometer and parkingmanager </kn>.

<h2>Requirement analysis</h2>

Our interaction with the customer has made it clear what he means for:
<li><kn>thermometer</kn>: an simulate device capable of detects the temperature in the parking-area. It sends the information taken via the network the network as event emitter;</li>
<li><kn>fan</kn>: an device capable to lower the temperature of the parking. It could be in on/off state and it is possible switch the state with dispatch messages via the network;</li>


<h2>Problem analysis</h2>
<div>
	The list of requirements for this sprint is:
	<ul>
		<li>the <tt>ParkManagerService </tt> turns on the fan if the parking area temperature is higher than TMAX (4);
		<li>the <tt>ParkManagerService </tt> turns off the fan if the parking-area temperature is lower than TMAX (4);

	</ul>
	To handle the information sent by the <tt>thermometer</tt> and <tt>fan</tt>, the application must be able to:
		<li>communicate with the <tt>thermometer</tt>;</li>
		<li>communicate with the <tt>fan</tt>;</li>
		<li>manage the information received from <tt>thermometer</tt> relating to the temperature of the <tt>parking-area</tt>;</li>
		<li>send the stop / start commands to the <tt>fan</tt>.</li>
</div>
	<div class="remark"> To destroy the abstraction gap is possible to use QACTOR which is a modelling language and defines a work model of the system based on actors behavior.
	</div>
	<h3>Components</h3>
	<h4>ParkManagerService</h4>
			<br>
		
			<table>
					<tbody>
						<tr>
							<td>
								ParkManagerService application server that interacts via network with the the thermometer and fan.
							</td>
							<td style="width: 55%">
								<center><img src="./img/ParkmanagerState.drawio.png" alt="ParkManagerServiceState" width="400" ></center> 
							</td>
						</tr>
					</tbody>
			</table> 

		<h4>Fan</h4>
			<table>
					<tbody>
						<tr>
							<td>
								In this case the component will be activated by the ParkManagerService or the parking-manager.
								<br>The costumer didn't given any software or device about the component but the costumer asked us to use mock-actor or mock-objects to simulate the behavior.
								<br> The fan will be modeled as a QActor.
					</td>
							</td>
							<td style="width: 55%">
					
								<center><img src="./img/FanState.drawio.png" alt="FanState" width="400" ></center> 
							</td>
						</tr>
					</tbody>
				</table> 
				
		<h4>Thermometer</h4>
			<br>
			<table>
					<tbody>
						<tr>
							<td>
								In our analysis, this element is an autonmous active component that does not 'known' any other component. Thus, it is actually modelled as an emitter of events.
								The thermometer will be modeled like QActors.</li> 
							</td>
							<td style="width: 55%">
								<center><img src="./img/ThermoterState.drawio.png" alt="ThermoterState" width="40%" ></center> 
							</td>
						</tr>
					</tbody>
			</table> 
			
	<h3>Components comunication</h3>
	<table style="width:98%">	
		<td style="width:50%" >
				<center><img src="./img/architettura_logica.png" alt="architettura_logica_iniziale" width="60%" ></center> 
		</td>
	</table>
	
	<br><br>

		<table style="width:100%">
			<tbody>	
				<tr>
						<k>Thermometer</k>
						
					<td style="width:50%" >
						
						<br> The thermometer as an emitter of event.
					</td>
					<td>
						<pre>
Event temperature : temperature (T)

Context ctxparkingarea ip [host="localhost" port=8021]

QActor thermometer context ctxparkingarea{
	...
		emit temperature : temperature ($VALUE)
	...

}


					    </pre>
					</td>
					</tr>
				</tbody>
			</table>

		<table >
			<tbody>	
				<tr>
						<k>ParkManagerService/Fan</k>
						
					<td style="width:50%" >
						<br> The ParkManagerService and the parking-manager will communicate with the fan with dispatches because it isn't necessary a response to continue the execution. 
						Furthermore, the parkManagerService will not send all the values generated by the thermometer, but only those that involve a change in the state of the fan, so as to reduce the number of messages exchanged.
					</td>
					<td>
						<pre>
Dispatch fanstart: fanstart(V)
Dispatch fanstop : fanstop(V)
						
Context ctxparkingarea ip [host="localhost" port=8021]

QActor parkmanagerservice context ctxparkingarea {
	...
		forward fan -m fanstart: fanstart(on) 
	...
		forward fan -m fanstop: fanstop(off)

}
					    </pre>
					</td>
					</tr>
				</tbody>
			</table>

				

				

<br>
<div class="remark">
The executable model is present in the following file: <a href="https://raw.githubusercontent.com/noemival/ParkManagerService_2021/main/it.unibo.parkManagerService/it.unibo.sprint4/src/sprint4.qak"target="web">sprint4.qak</a></p>	
</div>	

<h3>SPRINT REVIEW</h3>
	
	The analysis was produced some aspects that will be considerend in the next SPRINT: 
	<li>the fan must also be managed by the parking-manager;</li>
	<li>the parking-manager should activate / deactivate the fan so 
	the temperature value must be shown on the ParkingServiceStatusGui.   </li>
	
<h2>Testplan</h2>

	<k>Testplan 1</k>: we should simulate and check if the parkManagerService turn on/off the fan if the temperature is higher/lowre than TMAX.<br>
	<br> The code is present in the following file:  <a href="https://raw.githubusercontent.com/noemival/ParkManagerService_2021/main/it.unibo.parkManagerService/it.unibo.sprint4/test/it/unibo/sprint4/Testplan.kt"target="web">TestPlan1.kt</a></p>
	<br>
	To realize an authomatized test we will use JUNIT.

<h2>Deployment</h2>
	
The project is located in the repository: <a href="https://github.com/noemival/ParkManagerService_2021/tree/main/it.unibo.parkManagerService"target="web">https://github.com/noemival/ParkManagerService_2021/tree/main/it.unibo.parkManagerService</a></p>
 
<!-- USEFUL
<table style="width:100%" border="1">
<tr>
<td style="width:50%">
</td>
<td></td>
</tr>
</table>
-->
	      	
<br/><br/> 	
</div>  

<div style="background-color:rgba(86, 56, 253, 0.9); width:60%;text-align:left;color:white">
By studentName email: antonio.iacobelli@studio.unibo.it  
<img src="./img/antonioIacobelli.jpg" alt="mbot" width="15%" height="15%">
</div> 
<br>
<div style="background-color:rgba(86, 56, 253, 0.9); width:60%;text-align:left;color:white">
By studentName email: noemi.valentini5@studio.unibo.it  
<img src="./img/noemiValentini.jpg" alt="mbot" width="15%" height="15%">
</div> 
</body>
</html>
